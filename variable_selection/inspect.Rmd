---
title: "inspect"
author: "Konner Macias"
date: "May 10, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## What data do I want?
# - I would like perGame and advStats for each player in 2015
# - the salary of that player for 2015

```{r}
perGame <- read.csv("../data/player-data-wrangled/player2015/PerGame-2015wrangled.csv", stringsAsFactors = FALSE)

advStats <- read.csv("../data/player-data-wrangled/player2015/Adv-2015wrangled.csv", stringsAsFactors = FALSE)
```
Merge the data frames
```{r}
pgAdv <- merge(perGame, advStats, by = c("Player","Pos","G","Tm","Age","fix"))
pgAdv <- pgAdv[-c(7,8,33,34,48,53)]
colnames(pgAdv)
```
```{r}
summary(pgAdv)
```

# Get FA Player data
```{r}
fAgents <- read.csv('../data/salary-data/fixed-fa-signings/fixed-2015.csv', stringsAsFactors = FALSE)
fAgents <- fAgents[-c(1,2,3,4,5,6,7)]
colnames(fAgents)
```

# Get other players
```{r}
playerFixed <- read.csv('../data/salary-data/fixed-average-salaries/fixed-2015.csv', stringsAsFactors = FALSE)
playerFixed <- playerFixed[-c(1,3,4,5,6)]
colnames(playerFixed)
```
```{r}
mega2 <- merge(pgAdv, playerFixed, by.x = "fix", by.y = "name")
mega2[is.na(mega2)] <- 0
write.csv(mega2, "mega2.csv")
colnames(mega2)
```


```{r}
mega <- merge(pgAdv, playerFixed[-c(1)], by.x = "fix", by.y = "name")
mega[is.na(mega)] <- 0
colnames(mega)
write.csv(mega, "mega.csv")
```


```{r}
library(ggplot2)
library(GGally)
library(corrplot)
M <- cor(mega[-c(1,2,3,5)])
corrplot(M,method = "circle", type = "upper")
```
# Noteworthy variables:
GS, MP.x, FG, FGA, X2P, X2PA, FT, FTA, ORB, DRB, TRB, AST, STL, TOV, PF, PS.G, MP.y, PER, USG., OWS, DWS, WS, OBPM, BPM, VORP, average.salary
# Let's look at only those
```{r}
M <- cor(mega[c(7,8,9,10,15,16,19,20,22,23,24,25,26,28,29,30,31,32,43,44,45,46,48,50,51,52)])
corrplot.mixed(M, lower = "number", upper = "circle")
```

```{r}
sort(M[26,],decreasing = TRUE)
```
Let's look at FG first
```{r}
sort(M[3,],decreasing = FALSE)
```


# FREE AGENTS ONLY
# Merge into final data frame
```{r}
megaFreeAgents <- merge(pgAdv, fAgents, by.x = "fix", by.y ="name")
megaFreeAgents[is.na(megaFreeAgents)] <- 0
write.csv(megaFreeAgents, file = "mega.csv")
megaFreeAgents <- megaFreeAgents[-c(1,2,3,5)]
colnames(megaFreeAgents)
```

# Now let's look at only those
```{r}
M <- cor(mega[c(3,4,5,6,7,11,12,15,16,18,19,20,22,26,27,40,41,42,46,47,49)])
corrplot.mixed(M, lower = "number", upper = "circle")
```


